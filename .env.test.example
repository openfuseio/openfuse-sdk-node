# E2E Test Configuration
# Copy this file to .env.test and fill in the values

# ─────────────────────────────────────────────────────────────────────────────
# Core Configuration (required for all tests)
# ─────────────────────────────────────────────────────────────────────────────

# API endpoint
E2E_API_BASE=https://prod--acme.api.openfuse.io/v1

# Keycloak authentication
E2E_KEYCLOAK_URL=https://sso.openfuse.io
E2E_KEYCLOAK_REALM=tenants

# SDK client credentials (client_credentials grant)
E2E_CLIENT_ID=your-sdk-client-id
E2E_CLIENT_SECRET=your-sdk-client-secret

# Scope for SDK operations
E2E_COMPANY_SLUG=acme
E2E_ENVIRONMENT_SLUG=prod

# ─────────────────────────────────────────────────────────────────────────────
# Option 1: Pre-existing Fixtures (recommended for production)
# ─────────────────────────────────────────────────────────────────────────────
# Use manually created resources instead of dynamic creation.
# Only requires SDK client credentials above.

# Failure-rate fixture (used by: lifecycle, fallback, pure withBreaker tests)
# Requirements:
#   - A system
#   - A breaker with trip policy: failure-rate > 50%, action: open-breaker
#
# E2E_FIXTURE_SYSTEM_SLUG=e2e-lifecycle
# E2E_FIXTURE_SYSTEM_ID=<uuid-of-system>
# E2E_FIXTURE_BREAKER_SLUG=e2e-breaker
# E2E_FIXTURE_BREAKER_ID=<uuid-of-breaker>

# Latency fixture (used by: latency p95 tests)
# Requirements:
#   - A system (can reuse E2E_FIXTURE_SYSTEM_* if omitted)
#   - A breaker with trip policy: latency-p95 > 100ms, action: open-breaker
#
# E2E_FIXTURE_LATENCY_SYSTEM_SLUG=e2e-lifecycle  # optional, defaults to E2E_FIXTURE_SYSTEM_SLUG
# E2E_FIXTURE_LATENCY_SYSTEM_ID=<uuid>           # optional, defaults to E2E_FIXTURE_SYSTEM_ID
# E2E_FIXTURE_LATENCY_BREAKER_SLUG=e2e-latency-breaker
# E2E_FIXTURE_LATENCY_BREAKER_ID=<uuid-of-latency-breaker>

# ─────────────────────────────────────────────────────────────────────────────
# Option 2: Dynamic Creation (requires user credentials)
# ─────────────────────────────────────────────────────────────────────────────
# Creates resources on-the-fly during tests.
# Requires password grant client and user credentials.

# Backend service account (for resource creation)
# E2E_BACKEND_CLIENT_ID=tenants-backend-client
# E2E_BACKEND_CLIENT_SECRET=your-backend-client-secret

# E2E test client with password grant (directAccessGrantsEnabled: true)
# E2E_TEST_CLIENT_ID=tenants-e2e-test
# E2E_TEST_CLIENT_SECRET=your-e2e-client-secret

# User credentials for password grant
# E2E_ROOT_USER_EMAIL=admin@example.com
# E2E_ROOT_USER_PASSWORD=your-password
